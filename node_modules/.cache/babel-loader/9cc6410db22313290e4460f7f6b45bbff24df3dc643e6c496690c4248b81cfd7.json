{"ast":null,"code":"import axios from 'axios';\naxios.defaults.baseURL = process.env.REACT_APP_SERVER_DOMAIN;\nexport async function authentication(username) {\n  try {\n    return await axios.post('/api/authentication', {\n      username\n    });\n  } catch (error) {\n    return {\n      error: \"Username does not exit...!\"\n    };\n  }\n}\nexport async function getUserDetails(username) {\n  try {\n    const {\n      data\n    } = await axios.get('/api/user/${username}');\n    return {\n      data\n    };\n  } catch (error) {\n    return {\n      error: \"Password  does not match...!\"\n    };\n  }\n}\nexport async function registerUser(credentials) {\n  try {\n    const {\n      data: {\n        msg\n      },\n      status\n    } = await axios.post('/api/register', credentials);\n    let {\n      username,\n      password\n    } = credentials;\n    if (status === 201) {\n      await axios.post('/api/resgisterMail', {\n        username,\n        userEmail: email,\n        text: msg\n      });\n    }\n    return Promise.resolve(msg);\n  } catch (error) {\n    return Promise.reject({\n      error\n    });\n  }\n}\nexport async function verifyPassword({\n  username,\n  password\n}) {\n  try {\n    if (username) {\n      const {\n        data\n      } = axios.post('/api/login', {\n        username,\n        password\n      });\n      return Promise.resolve({\n        data\n      });\n    }\n  } catch (error) {\n    return Promise.reject({\n      error: \"Invalid password\"\n    });\n  }\n}\nexport async function updateUser(response) {\n  try {\n    const {\n      token\n    } = await localStorage.getItem('token');\n    const {\n      data\n    } = await axios.put('/api/updateuser', response, {\n      headers: {\n        \"Authorization\": `Bearer ${token}`\n      }\n    });\n    return Promise.resolve({\n      data\n    });\n  } catch (error) {\n    return Promise.reject({\n      error: \"Can not update user\"\n    });\n  }\n}\nexport async function generateOTP(username) {\n  try {\n    const {\n      data: {\n        code\n      },\n      status\n    } = await axios.get('/api/generateOTP', {\n      params: {\n        username\n      }\n    });\n    if (status === 201) {\n      let {\n        data: {\n          email\n        }\n      } = await getUser({\n        username\n      });\n      let text = `Your Password Recovery OTP is ${code}. Verify and recover your password `;\n      await axios.post('/api/registerMail', {\n        username,\n        userEmail: email,\n        text,\n        subject: \"Password Recovery OTP\"\n      });\n    }\n    return Promise.resolve(code);\n  } catch (error) {\n    return Promise.reject({\n      error: \"Can not generate OTP\"\n    });\n  }\n}\nexport async function verifyOTP({\n  username,\n  code\n}) {\n  try {\n    const {\n      data,\n      status\n    } = await axios.get('/api/verifyOTP', {\n      params: {\n        username,\n        code\n      }\n    });\n    return {\n      data,\n      status\n    };\n  } catch (error) {\n    return Promise.reject({\n      error\n    });\n  }\n}\nexport async function resetPassword(username, password) {\n  try {\n    const {\n      data,\n      status\n    } = await axios.put('/api/resetPassword', {\n      username,\n      password\n    });\n    return Promise.resolve({\n      data,\n      status\n    });\n  } catch (error) {\n    return Promise.reject({\n      error\n    });\n  }\n}","map":{"version":3,"names":["axios","defaults","baseURL","process","env","REACT_APP_SERVER_DOMAIN","authentication","username","post","error","getUserDetails","data","get","registerUser","credentials","msg","status","password","userEmail","email","text","Promise","resolve","reject","verifyPassword","updateUser","response","token","localStorage","getItem","put","headers","generateOTP","code","params","getUser","subject","verifyOTP","resetPassword"],"sources":["D:/login_app/client/src/helpers/helper.js"],"sourcesContent":["import axios from 'axios';\r\n\r\n\r\naxios.defaults.baseURL = process.env.REACT_APP_SERVER_DOMAIN;\r\n\r\nexport async function authentication(username) {\r\n    try {\r\n        return await axios.post('/api/authentication', { username })\r\n    } catch (error) {\r\n        return { error: \"Username does not exit...!\" };\r\n    }\r\n}\r\n\r\nexport async function getUserDetails(username) {\r\n    try {\r\n        const { data } = await axios.get('/api/user/${username}');\r\n        return { data }\r\n    } catch (error) {\r\n        return { error: \"Password  does not match...!\" };\r\n    }\r\n}\r\n\r\nexport async function registerUser(credentials) {\r\n    try {\r\n        const { data: { msg }, status } = await axios.post('/api/register', credentials);\r\n        let { username, password } = credentials\r\n        if (status === 201) {\r\n            await axios.post('/api/resgisterMail', { username, userEmail: email, text: msg })\r\n        }\r\n        return Promise.resolve(msg);\r\n\r\n    } catch (error) {\r\n        return Promise.reject({ error });\r\n\r\n    }\r\n}\r\n\r\nexport async function verifyPassword({ username, password }) {\r\n    try {\r\n        if (username) {\r\n            const { data } = axios.post('/api/login', { username, password });\r\n            return Promise.resolve({ data });\r\n        }\r\n    } catch (error) {\r\n        return Promise.reject({ error: \"Invalid password\" });\r\n    }\r\n}\r\n\r\nexport async function updateUser(response) {\r\n    try {\r\n        const { token, } = await localStorage.getItem('token');\r\n        const { data } = await axios.put('/api/updateuser', response, { headers: { \"Authorization\": `Bearer ${token}` } });\r\n        return Promise.resolve({ data });\r\n    } catch (error) {\r\n        return Promise.reject({ error: \"Can not update user\" });\r\n    }\r\n}\r\n\r\nexport async function generateOTP(username) {\r\n    try {\r\n        const { data: { code }, status } = await axios.get('/api/generateOTP', { params: { username } });\r\n        if (status === 201) {\r\n            let { data: { email } } = await getUser({ username });\r\n            let text = `Your Password Recovery OTP is ${code}. Verify and recover your password `;\r\n            await axios.post('/api/registerMail', { username, userEmail: email, text, subject: \"Password Recovery OTP\" });\r\n\r\n        }\r\n        return Promise.resolve(code);\r\n    } catch (error) {\r\n        return Promise.reject({ error: \"Can not generate OTP\" });\r\n    }\r\n}\r\n\r\nexport async function verifyOTP({ username, code }) {\r\n    try {\r\n        const { data, status } = await axios.get('/api/verifyOTP', { params: { username, code } })\r\n        return { data, status }\r\n    } catch (error) {\r\n        return Promise.reject({ error })\r\n    }\r\n}\r\n\r\nexport async function resetPassword(username, password) {\r\n    try {\r\n        const { data, status } = await axios.put('/api/resetPassword', { username, password })\r\n        return Promise.resolve({ data, status })\r\n    } catch (error) {\r\n        return Promise.reject({ error });\r\n    }\r\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}